<!DOCTYPE html>
<html lang="en">
  {% load static %} {% load static tailwind_tags %}

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="{% static 'css/dist/output.css' %}" rel="stylesheet" />
    <!-- <link href="/dist/output.css" rel="stylesheet" href="" /> -->
    <title>Elish Paribahan</title>
  </head>

  <body>
    <!-- Call Now -->
    <nav class="py-3 px-5">
      <div>
        <h1
          href="tel:01711472684"
          class="text-[16px] md:text-lg font-bold bg-clip-text border-b border-blue-500 text-transparent bg-gradient-to-r from-blue-500 to-violet-500"
        >
          <a href="tel:01711472684">Call Now : 01711472684</a>
        </h1>
      </div>
    </nav>
    <!-- Actual Nav -->
    <nav class="flex justify-between px-5 items-center py-5 shadow-lg">
      <a href="{% url 'BusSchedule:home-page' %}" class="cursor-pointer">
        <h1
          class="font-bold flex gap-x-2 items-center text-lg md:text-xl lg:text-3xl bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-violet-500"
        >
          <img
            src="{% static 'images/elishLogo.png' %}"
            class="w-[120px] h-[50px] md:w-[240px] md:h-[80px] rounded-md"
            alt=""
          />
          Elish Paribahan
        </h1>
      </a>
      <div
        class="hidden md:flex items-center space-x-8 md:text-lg text-gray-600"
      >
        <a href="{% url 'BusSchedule:home-page' %}" class="flex gap-x-1"
          ><img src="{% static 'images/homeIcon.svg' %}" alt="" />
          <span class="border-b-2 border-blue-400">Home</span>
        </a>
        <a href="{% url 'BusSchedule:service' %}" class="hover:underline"
          >Our Service</a
        >
        <a href="" class="hover:underline">Contact Us</a>
        <a href="" class="hover:underline">Print E-Ticket</a>
      </div>
      <div class="flex md:hidden cursor-pointer" onclick="hamburgerMenu()">
        <img
          src="{% static 'images/hamburger-menu-svgrepo-com.svg' %}"
          alt=""
        />
      </div>
    </nav>
    <!-- HamburgerMenu Options -->
    <div class="bg-white hidden shadow-lg hamburger">
      <div
        class="flex flex-col justify-center items-center space-y-5 text-lg py-10 text-gray-600"
      >
        <a
          href="{% url 'BusSchedule:home-page' %}"
          class="border-b-2 border-blue-400"
          >Home</a
        >
        <a href="{% url 'BusSchedule:service' %}" class="hover:underline"
          >Our Service</a
        >
        <a href="" class="hover:underline">Contact Us</a>
        <a href="" class="hover:underline">Print E-Ticket</a>
      </div>
    </div>
    <main>
      <!-- Search Again button -->
      <div class="w-full flex justify-center mt-5">
        <button
          class="px-3 py-2 border-2 border-blue-600 text-blue-600 font-medium text-sm leading-tight uppercase rounded hover:bg-blue-600 hover:bg-opacity-10 focus:outline-none focus:ring-0 transition duration-150 ease-in-out"
          type="button"
          onclick="removeOrAddSearch()"
          id="searchAgainButton"
        >
          Search Again
        </button>
      </div>
      <!-- Ticket Form -->
      <div
        id="searchBuses"
        class="shadow-2xl w-11/12 hidden font-bold md:max-w-7xl px-1 py-4 md:px-4 md:py-4 mx-auto mt-2 md:mt-4 lg:mt-8 rounded-lg border-2 border-gray-500 bg-gradient-to-r from-gray-100 to-gray-300"
      >
        <form method="post" action="{% url 'BusSchedule:bus-search' %}">
          {% csrf_token %}
          <div class="flex w-full flex-col space-y-3 px-2 md:px-4 py-4">
            <!-- AC CHECK -->
            <div>
              <div class="flex items-center justify-center space-x-5 py-2">
                <label
                  class="inline-flex text-[16px] md:text-lg lg:text-xl font-semibold items-center"
                >
                  <div
                    class="flex justify-center items-center w-6 h-6 border-2 mr-1 border-blue-500 rounded-full text-center"
                  >
                    <input
                      name="all"
                      class="checkboxOne appearance-none w-4 h-4 rounded-full"
                      type="checkbox"
                      onchange="checkboxOne(event)"
                    />
                  </div>
                  All
                </label>
                <label
                  class="inline-flex text-[16px] md:text-lg lg:text-xl items-center font-semibold"
                >
                  <div
                    class="flex justify-center items-center w-6 h-6 border-2 mr-1 border-blue-500 rounded-full text-center"
                  >
                    <input
                      name="ac"
                      class="checkboxTwo appearance-none w-4 h-4 rounded-full"
                      type="checkbox"
                      onchange="checkboxTwo(event)"
                    />
                  </div>
                  AC
                </label>
                <label
                  class="inline-flex text-[16px] md:text-lg lg:text-xl font-semibold items-center"
                >
                  <div
                    class="flex justify-center items-center w-6 h-6 border-2 mr-1 border-blue-500 rounded-full text-center"
                  >
                    <input
                      name="non-ac"
                      class="checkboxThree appearance-none w-4 h-4 rounded-full"
                      type="checkbox"
                      onchange="checkboxThree(event)"
                    />
                  </div>
                  Non AC
                </label>
              </div>
            </div>
            <div
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-0 md:gap-x-5 gap-y-8 py-4"
            >
              <div
                class="flex-shrink-0 items-center space-x-4 md:border-r-2 md:border-l-2 border-gray-500 px-1"
              >
                <div class="flex items-center gap-x-1">
                  <img
                    src="{% static 'images/get-on-bus.svg' %}"
                    class="w-7 h-7 md:w-11 md:h-11"
                  />
                  <label
                    class="text-gray-600 text-[16px] md:text-xl lg:text-2xl"
                  >
                    From</label
                  >
                  <select
                    name="from"
                    id=""
                    class="w-full focus:outline-none text-gray-600 border-b-2 p-2 text-sm md:text-lg border-blue-400 bg-transparent"
                  >
                    {% if start_location %}
                    <option selected="">Select City</option>
                    {% for location in start_location %}

                    <option value="{{ location }}">{{ location }}</option>

                    {% endfor %} {% endif %}
                  </select>
                </div>
              </div>
              <div
                class="flex-shrink-0 items-center space-x-4 md:border-r-2 border-gray-500 px-2"
              >
                <div class="flex items-center gap-x-1">
                  <img
                    class="w-7 h-7 md:w-11 md:h-11"
                    src="https://img.icons8.com/ios/50/000000/get-off-bus.png"
                  />
                  <label class="text-gray-600 text-[16px] md:text-xl">To</label>
                  <select
                    name="to"
                    id=""
                    class="w-full focus:outline-none text-gray-600 border-b-2 p-2 text-sm lg:text-lg border-blue-400 bg-transparent"
                  >
                    {% if end_location %}
                    <option selected="">Select City</option>
                    {% for location in end_location %}

                    <option value="{{ location }}">{{ location }}</option>

                    {% endfor %} {% endif %}
                  </select>
                </div>
              </div>
              <div
                class="flex-shrink-0 items-center space-x-4 md:border-r-2 border-gray-500 px-1"
              >
                <div class="flex items-center gap-x-1">
                  <img
                    src="https://img.icons8.com/dotty/80/000000/planner.png"
                    class="w-8 h-8 md:w-11 md:h-11"
                  />
                  <label class="flex text-gray-600 text-[16px] md:text-xl"
                    >Depurture <span class="ml-1">Date</span></label
                  >
                  <input
                    type="date"
                    name="date"
                    id=""
                    class="w-full bg-transparent focus:outline-none text-gray-600 border-b-2 p-2 text-sm lg:text-lg border-blue-400"
                  />
                </div>
              </div>
            </div>
            <div class="flex justify-center">
              <button
                type="submit"
                class="inline-flex items-center justify-center w-4/5 md:w-2/5 px-6 py-2 border-2 border-blue-600 text-blue-600 font-medium text-sm leading-tight uppercase rounded hover:bg-blue-600 hover:bg-opacity-10 focus:outline-none focus:ring-0 transition duration-150 ease-in-out"
              >
                <img
                  src="{% static 'images/searchIcon.svg' %}"
                  class="w-5 h-5 md:w-6 md:h-6 mr-1"
                  alt=""
                />
                Search Buses
              </button>
            </div>
          </div>
        </form>
      </div>
      <!-- Heading -->
      <div class="mx-2 md:mx-5 p-4 mt-4 bg-blue-200/30 rounded-md">
        <!-- Following h1 tag info should come from Home page -->
        <h1 class="text-gray-600">Dhaka - Coxs Bazar On 19-04-2022</h1>
        <h1
          class="font-bold flex gap-x-2 items-center text-2xl md:text-3xl bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-violet-500"
        >
          Available Buses
        </h1>
      </div>
      <!-- Buses -->
      <div>
        <!-- Column info -->
        <div
          class="hidden md:grid grid-cols-5 mx-2 md:mx-5 mt-3 p-4 text-gray-600 text-xl font-bold border border-gray-300"
        >
          <h1 class="col-span-2">Operator & Coach Info</h1>
          <h1>Starting Time</h1>
          <h1>Seats Capacity</h1>
          <h1 class="text-right">Fare (BDT)</h1>
        </div>
        <!-- Buses -->
        <div id="busesCol" class="flex flex-col gap-y-3 mx-2 md:mx-5 mt-3">
          <!-- Bus -->
        </div>
      </div>
    </main>
    <!-- footer -->
    <footer
      class="py-4 mt-5 w-[95vw] md:max-w-6xl mx-auto flex flex-col space-y-8 items-center justify-center"
    >
      <div>
        <h1
          class="font-bold text-3xl md:text-5xl bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-violet-500"
        >
          Connect With Us
        </h1>
      </div>
      <div
        class="flex flex-col items-center lg:items-start lg:flex-row md:space-x-10 space-y-4 lg:space-y-0"
      >
        <div>
          <a
            href="https://www.facebook.com/elishparibahan"
            target="_blank"
            class="flex items-center gap-x-2"
            href=""
            ><img
              src="https://img.icons8.com/fluency/48/000000/facebook-new.png"
              alt=""
            />
            <span
              class="font-bold text-[16px] md:text-lg lg:text-xl hover:underline"
              >www.facebook.com/elishparibahan</span
            ></a
          >
        </div>
        <div>
          <a
            href="https://www.google.com/maps?q=Elish+Paribahan,+Jatrabari,+1232&ftid=0x3755b959443288c9:0xd66c24c0e160c091&hl=en-BD&gl=bd&entry=gps&lucs=s2se,a1&shorturl=1"
            target="_blank"
            class="flex items-center gap-x-2"
            href=""
            ><img
              src="https://img.icons8.com/fluency/48/000000/google-maps-new.png"
              alt=""
            />
            <span
              class="font-bold text-[16px] md:text-lg lg:text-xl hover:underline"
              >Location</span
            ></a
          >
        </div>
        <div>
          <a
            href="mailto:shahidul.elish@gmail.com"
            target="_blank"
            class="flex items-center gap-x-2"
            href=""
            ><img
              src="https://img.icons8.com/color/48/000000/gmail-new.png"
              alt=""
            />
            <span
              class="font-bold text-[16px] md:text-lg lg:text-xl hover:underline"
              >shahidul.elish@gmail.com</span
            ></a
          >
        </div>
        <div>
          <a
            href="tel:01711472684"
            target="_blank"
            class="flex items-center gap-x-2"
            href=""
            ><img
              src="https://img.icons8.com/ios/50/000000/callback.png"
              class="w-11 h-11"
            />
            <span
              class="font-bold text-[16px] md:text-lg lg:text-xl hover:underline"
              >01711472684</span
            ></a
          >
        </div>
      </div>
    </footer>
    <div class="mt-3 flex justify-center py-4">
      <p class="text-gray-600 text-sm">DEVELOPED BY BotSofware</p>
    </div>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    // Buses from database
    {
      {
        buses | safe;
      }
    }
    {
      {
        date | safe;
      }
    }
    // /* // Buses from database
    // const buses = [
    //   {
    //     coachNo: "Coach No: 305-DHA-BAR-M",
    //     busType: "AC",
    //     startingTime: "4:20 pm",
    //     seatAvailable: "69",
    //     fare: "800",
    //     bookedSeats: ["A1"],
    //     startingPoint: "Jatrabari",
    //     seatStructure: [
    //       ["A1", "A2", "X", "A3", "A4"],
    //       ["B1", "B2", "X", "B3", "B4"],
    //       ["C1", "C2", "C3", "C4", "C5"],
    //     ],
    //     boardingPoints: [
    //       ["Gulistan", "9.30am"],
    //       ["Gabtoli", "10.00am"],
    //     ],
    //     droppingPoints: [
    //       ["Barishal Town", "9.30am"],
    //       ["Borguna", "10.00am"],
    //     ],
    //   },
    //   {
    //     coachNo: "Coach No: 305-DHA-COX-A",
    //     busType: "AC",
    //     startingTime: "4:69 pm",
    //     seatAvailable: "25",
    //     fare: "692",
    //     bookedSeats: [],
    //     startingPoint: "Motijheel",
    //     seatStructure: [
    //       ["A1", "A2", "X", "A3"],
    //       ["B1", "B2", "X", "B3"],
    //     ],
    //     boardingPoints: [
    //       ["Kakrail", "10.30am"],
    //       ["Arambagh", "10.00am"],
    //     ],
    //     droppingPoints: [
    //       ["Gulistan", "9.30am"],
    //       ["Gabtoli", "10.00am"],
    //     ],
    //   },
    //   {
    //     coachNo: "Coach No: 305-BAR-DHA-N",
    //     busType: "AC",
    //     startingTime: "4:69 pm",
    //     seatAvailable: "25",
    //     fare: "692",
    //     bookedSeats: [],
    //     startingPoint: "Arambagh",
    //     seatStructure: [
    //       ["A1", "A2", "X", "A3", "A4"],
    //       ["B1", "B2", "X", "B3", "B4"],
    //     ],
    //     boardingPoints: [
    //       ["Saydabad", "9.30am"],
    //       ["Jatrabari", "10.00am"],
    //     ],
    //     droppingPoints: [
    //       ["Gulistan", "9.30am"],
    //       ["Gabtoli", "10.00am"],
    //     ],
    //   },
    // ];
    // */

    let selectedSeats = [];
    let totalSelectedSeats = "";
    let totalAmountofSeats = "";
    let selectedBoardingPointAndTime = "";
    let selectedDroppingPointAndTime = "";

    const getData = (e) => {
      const busNo =
        e.composedPath()[0].classList[1].length < 5
          ? e.composedPath()[0].classList[1].slice(4, 5)
          : e.composedPath()[0].classList[1].slice(4, 6);

      if (
        selectedSeats.length > 0 &&
        selectedBoardingPointAndTime &&
        selectedDroppingPointAndTime
      ) {
        totalSelectedSeats = selectedSeats.length;
        totalAmountofSeats = totalSelectedSeats * buses[busNo].fare;

        var booking_details_page = "{% url 'BusSchedule:booking' %}";
        var booking_details_form = $(
          '<form action="' +
            booking_details_page +
            '" method="post">' +
            "{% csrf_token %}" +
            '<input type="text" name="date" value="' +
            selected_date +
            '" />' +
            '<input type="text" name="coach_no" value="' +
            buses[busNo]["coachNo"] +
            '" />' +
            '<input type="text" name="selected_seats" value="' +
            selectedSeats +
            '" />' +
            '<input type="text" name="boarding_point" value="' +
            selectedBoardingPointAndTime +
            '" />' +
            '<input type="text" name="dropping_point" value="' +
            selectedDroppingPointAndTime +
            '" />' +
            "</form>"
        );
        $("body").append(booking_details_form);
        booking_details_form.submit();
      } else {
        alert("Please Select A Seat and Boarding Point");
      }
    };

    const deleteShowSelectedSeats = (e) => {
      const busNo =
        e.composedPath()[0].classList[1].length < 5
          ? e.composedPath()[0].classList[1].slice(4, 5)
          : e.composedPath()[0].classList[1].slice(4, 6);

      selectedSeats.splice(selectedSeats.indexOf(e.target.value), 1);
      const showSelectedSeats = document.querySelector(
        `#selectedSeats-${busNo}`
      );
      showSelectedSeats.innerHTML = selectedSeats
        .map((seat) => {
          return `
        <div class=' flex justify-between items-center w-full border-b border-b-gray-400 py-2'>
          <p class="text-xl">${seat}</p>
          <button
          value=${seat}
          onclick='deleteShowSelectedSeats(event)'
          class="px-3 bus-${busNo} py-1 rounded-full border border-red-500"
          type="button"
          >
            x
          </button>
          </div>
        `;
        })
        .join("");

      const deleteSeatsfromStructure = document.querySelector(
        `.bus-${busNo}-${e.target.value}`
      );
      deleteSeatsfromStructure.classList.remove("bg-green-500");
      deleteSeatsfromStructure.classList.add("bg-white");
      deleteSeatsfromStructure.classList.remove("text-white");
      deleteSeatsfromStructure.classList.add("text-black");

      if (selectedSeats.length === 0) {
        showSelectedSeats.classList.add("hidden");
      }

      //total seats and total amount
      const totalSeats = document.querySelector(`.totalSeats-${busNo}`);
      totalSeats.innerText = selectedSeats.length;
      const totalAmount = document.querySelector(`.totalAmount-${busNo}`);
      totalAmount.innerText = selectedSeats.length * buses[busNo].fare;
    };

    const getSelectedSeats = (e) => {
      const busNo =
        e.composedPath()[0].classList[1].length < 9
          ? e.composedPath()[0].classList[1].slice(4, 5)
          : e.composedPath()[0].classList[1].slice(4, 6);

      if (!selectedSeats.includes(e.target.value)) {
        selectedSeats.push(e.target.value);
        e.composedPath()[0].classList.remove("bg-white");
        e.composedPath()[0].classList.add("bg-green-500");
        e.composedPath()[0].classList.remove("text-black");
        e.composedPath()[0].classList.add("text-white");

        // Show Users to see the selected Seats
        const showSelectedSeats = document.querySelector(
          `#selectedSeats-${busNo}`
        );
        showSelectedSeats.classList.remove("hidden");
        showSelectedSeats.classList.add("flex");
        showSelectedSeats.innerHTML = selectedSeats
          .map((seat) => {
            return `
        <div class='flex justify-between items-center w-full border-b border-b-gray-400 py-2'>
          <p class="text-xl">${seat}</p>
          <button
          value=${seat}
          onclick='deleteShowSelectedSeats(event)'
          class="px-3 bus-${busNo} py-1 rounded-full border border-red-500 hover:bg-red-500 hover:text-white"
          type="button"
          >
            x
          </button>
          </div>
        `;
          })
          .join("");

        //total seats and total amount
        const totalSeats = document.querySelector(`.totalSeats-${busNo}`);
        totalSeats.innerText = selectedSeats.length;
        const totalAmount = document.querySelector(`.totalAmount-${busNo}`);
        totalAmount.innerText = selectedSeats.length * buses[busNo].fare;
      } else {
        for (let i = 0; i < selectedSeats.length; i++) {
          if (selectedSeats[i] === e.target.value) {
            selectedSeats.splice(i, 1);
          }
        }
        const showSelectedSeats = document.querySelector(
          `#selectedSeats-${busNo}`
        );
        if (selectedSeats.length === 0) {
          showSelectedSeats.classList.add("hidden");
        } else {
          showSelectedSeats.innerHTML = selectedSeats
            .map((seat) => {
              return `
        <div class='flex justify-between items-center w-full border-b border-b-gray-400 py-2'>
          <p class="text-xl">${seat}</p>
          <button
          value=${seat}
          onclick='deleteShowSelectedSeats(event)'
          class="px-3 bus-${busNo} py-1 rounded-full border border-red-500 hover:bg-red-500 hover:text-white"
          type="button"
          >
            x
          </button>
          </div>
        `;
            })
            .join("");
        }
        e.composedPath()[0].classList.remove("bg-green-500");
        e.composedPath()[0].classList.add("bg-white");
        e.composedPath()[0].classList.remove("text-white");

        //total seats and total amount
        const totalSeats = document.querySelector(`.totalSeats-${busNo}`);
        totalSeats.innerText = selectedSeats.length;
        const totalAmount = document.querySelector(`.totalAmount-${busNo}`);
        totalAmount.innerText = selectedSeats.length * buses[busNo].fare;
      }
    };

    const getBoardingPointAndTime = (e) => {
      selectedBoardingPointAndTime = e.target.value;
    };

    const getdroppingPointAndTime = (e) => {
      selectedDroppingPointAndTime = e.target.value;
    };

    // Prints Each Bus
    const busesCol = document.querySelector("#busesCol");

    busesCol.innerHTML = buses
      .map((bus, index) => {
        return `<div
      class="bus-${index} border border-gray-300 text-gray-600 shadow-lg"
    >
      <div
        class="grid grid-cols-1 gap-y-1 md:gap-y-0 md:grid-cols-5 p-4 text-lg hover:bg-blue-200/30 cursor-pointer"
      >
        <div class="col-span-1 gap-y-2 md:gap-y-0 md:col-span-2">
          <h1 class='font-bold text-xl text-gray-600 md:hidden'>Starting Time : ${bus.boardingPoints[0][1]}</h1>
          <h1>Starting Point : ${bus.boardingPoints[0][0]}</h1>
          <h1 class="">${bus.coachNo}</h1>
          <h1>Bus Type : ${bus.busType}</h1>
        </div>
        <div>
          <h1 class='font-bold text-xl text-gray-600 hidden md:flex'>Starting Time : ${bus.boardingPoints[0][1]}</h1>
        </div>
        <div><h1>Seat Available : ${bus.seatAvailable}</h1></div>
        <div class="md:text-right">
          <h1 class="font-bold text-xl">Price (BDT) : ${bus.fare}</h1>
          <button
            onclick="ViewSeats(event)"
            name="${index}"
            type="button"
            class="mt-2 viewSeatsButton-${index} px-2 py-2 border-2 text-white bg-green-600 font-medium text-sm leading-tight uppercase rounded hover:bg-green-500  focus:outline-none focus:ring-0 transition duration-150 ease-in-out"
          >
            View Seats
          </button>
        </div>
      </div>
      <!-- Seats -->
      <div class="hidden SeatsBus-${index}">
        <div
          class="flex justify-center my-2 text-gray-600 text-xl font-bold py-3 border-b border-t border-gray-300"
        >
          <h1>Book Your Seat</h1>
        </div>
        <!-- Available Seat and Sold Seat -->
        <div class="flex flex-row flex-wrap text-[13px] md:text-sm justify-center md:justify-start items-center py-2 my-1 space-x-2 md:space-x-3 w-full md:mx-2">
          <div class="flex items-center gap-x-1 md:gap-x-2">
            <div class="w-5 h-5 bg-white border border-gray-400"></div>
            <h1 class='text-black'>Available Seat</h1>
          </div>
          <div class="flex items-center gap-x-1 md:gap-x-2">
            <div class="w-5 h-5 bg-gray-500"></div>
            <h1>Sold Seat</h1>
          </div>
          <div class="flex items-center gap-x-1 md:gap-x-2">
          <div class="w-5 h-5 bg-green-500"></div>
          <h1>Selected Seat</h1>
        </div>
        </div>
        <!-- Seat and Checkout Option -->
        <div class="grid grid-cols-1 md:grid-cols-3 my-2">
          <!-- Seat -->
          <div
            class="w-fit mx-auto border border-gray-300 shadow-md mt-2"
          >
            <div class="flex justify-end m-2">
              <h1
                class="py-2 px-5 text-center font-bold shadow-2xl bg-slate-300"
              >
                Driver
              </h1>
            </div>
            <div class="seatStructure-${index} flex flex-col space-y-2 pb-6">
            </div>
          </div>
          <!-- Checkout -->
          <div class="col-span-2 py-2 shadow-lg">
            <div class="flex flex-col gap-y-4">
              <div class="text-center">
                <h1 class="text-2xl text-gray-600 font-bold">
                  Booking Details :
                </h1>
              </div>
              <div class="border border-gray-300 w-fit mx-auto px-4 py-2">
                <div class="flex flex-col space-y-2 items-center">
                  <div class="p-2">
                    <h1 class="font-bold text-lg">Selected Seats :</h1>
                  </div>
                  <div
                    id='selectedSeats-${index}'
                    class="hidden flex-col justify-center w-[300px] border border-gray-300 px-3 py-2 items-center space-x-2"
                  >
                   </div>
                </div>
                <div class="text-gray-600 flex gap-x-2 items-center text-lg mt-2 font-bold">
                  <h1>Total Seats :</h1>
                  <h1 class='totalSeats-${index}'></h1>
                </div>
                <div class="text-gray-600 flex gap-x-2 items-center text-lg mt-2 font-bold">
                  <h1>Total Amount :</h1>
                  <h1 class='totalAmount-${index}'></h1>
                </div>
                <div class="text-gray-600 text-lg mt-2 font-bold">
                  <label for="">Choose Boarding Counter & Time :</label>
                  <select
                    name=""
                    onchange='getBoardingPointAndTime(event)'
                    id="boardingPoints-${index}"
                    class="w-full  focus:outline-none text-gray-600 border-b-2 p-2 text-lg border-blue-400 bg-transparent"
                  >
                  </select>
                </div>
                <div class="text-gray-600 text-lg mt-2 font-bold">
                  <label for="">Choose Dropping Counter & Time :</label>
                  <select
                    name=""
                    onchange='getdroppingPointAndTime(event)'
                    id="droppingPoints-${index}"
                    class="w-full  focus:outline-none text-gray-600 border-b-2 p-2 text-lg border-blue-400 bg-transparent"
                  >
                  </select>
                </div>
                <div>
                  <button
                    type="button"
                    onclick='getData(event)'
                    class="mt-3 bus-${index} w-full px-2 py-2 border-2 border-blue-600 text-blue-600 font-medium text-sm leading-tight uppercase rounded hover:bg-blue-600 hover:bg-opacity-10 focus:outline-none focus:ring-0 transition duration-150 ease-in-out"
                  >
                    Next
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>`;
      })
      .join("");

    // Prints Seat Structure
    buses.forEach((bus, index) => {
      const inputSeatStructure = document.querySelector(
        `.seatStructure-${index}`
      );

      let generatedHTML = "";

      for (let row of bus.seatStructure) {
        generatedHTML += `<div class="flex gap-x-2 mx-1 md:mx-2">`;
        for (let seat of row) {
          if (seat === "X") {
            generatedHTML += `<p class="w-[40px] h-auto leading-8 text-center"></p>`;
            continue;
          }
          generatedHTML += `<button
        type="button"
        onclick="getSelectedSeats(event)"
        value="${seat}"
        class="border bus-${index}-${seat} cursor-pointer border-gray-300 bg-white  w-[40px] h-auto leading-8 text-center"
        >
      ${seat}
      </button>`;
        }
        generatedHTML += `</div>`;

        inputSeatStructure.innerHTML = generatedHTML;
      }
    });

    // Prints EachBus Boarding Point and Time and Dropping Point and Time
    buses.forEach((bus, index) => {
      const inputBoardingPointandTime = document.getElementById(
        `boardingPoints-${index}`
      );
      inputBoardingPointandTime.innerHTML += `<option selected="">Please Select</option>`;

      for (let point of bus.boardingPoints) {
        inputBoardingPointandTime.innerHTML += `
      <option value="${point[0]} - ${point[1]}">${point[0]} (${point[1]})</option>
      `;
      }

      const inputDroppingPointandTime = document.getElementById(
        `droppingPoints-${index}`
      );
      inputDroppingPointandTime.innerHTML += `<option selected="">Please Select</option>`;

      for (let point of bus.droppingPoints) {
        inputDroppingPointandTime.innerHTML += `
      <option value="${point[0]} - ${point[1]}">${point[0]} (${point[1]})</option>
      `;
      }
    });

    const ViewSeats = (e) => {
      // Delete show selected seats
      buses.forEach((bus, index) => {
        const showSelectedSeats = document.querySelector(
          `#selectedSeats-${index}`
        );
        showSelectedSeats.classList.add("hidden");
        showSelectedSeats.classList.remove("flex");
      });

      // Turns seat white after closing seats of a certain bus
      if (selectedSeats.length > 0) {
        selectedSeats.forEach((seat) => {
          for (let i = 0; i < buses.length; i++) {
            if (i !== e.target.name) {
              let changeRestButton = document.querySelector(
                `.bus-${i}-${seat}`
              );
              changeRestButton.classList.remove("bg-green-500");
              changeRestButton.classList.add("bg-white");
              changeRestButton.classList.remove("text-white");
              changeRestButton.classList.add("text-black");
            }
          }
        });
      }

      // View Seats

      const busSeat = document.querySelector(`.SeatsBus-${e.target.name}`);
      const openOrCloseViews = document.querySelector(
        `.viewSeatsButton-${e.target.name}`
      );
      if (busSeat.classList.contains("hidden")) {
        busSeat.classList.remove("hidden");
        // Hide rest of the buses instead of the selected bus
        buses.forEach((bus, index) => {
          for (let i = 0; i < buses.length; i++) {
            if (i != e.target.name) {
              const eachBus = document.querySelector(`.SeatsBus-${i}`);
              eachBus.classList.add("hidden");
              document.querySelector(`.viewSeatsButton-${i}`).innerText =
                "View Seats";
            }
          }
        });
        openOrCloseViews.innerText = "Close Seats";
        selectedBoardingPointAndTime = "";
      } else {
        busSeat.classList.add("hidden");
        openOrCloseViews.innerText = "View Seats";
      }

      selectedSeats = [];

      // Disable booked Seats

      if (buses[e.target.name].bookedSeats.length > 0) {
        buses[e.target.name].bookedSeats.forEach((seat) => {
          const buttonToBeDisabled = document.querySelector(
            `.bus-${e.target.name}-${seat}`
          );
          buttonToBeDisabled.classList.add("bg-gray-500");
          buttonToBeDisabled.classList.add("text-white");
          buttonToBeDisabled.disabled = true;
        });
      }
    };

    const removeOrAddSearch = () => {
      const search = document.getElementById("searchBuses");
      const searchAgainButton = document.getElementById("searchAgainButton");
      if (search.classList.contains("hidden")) {
        search.classList.remove("hidden");
        searchAgainButton.innerHTML = `<h1>Search Again <span class='ml-2 px-2 py-0.5 rounded-full border-2 border-blue-700'>X</span></h1>`;
      } else {
        search.classList.add("hidden");
        searchAgainButton.innerHTML = `<h1>Search Again</h1>`;
      }
    };

    const hamburgerMenu = () => {
      const hamburger = document.querySelector(".hamburger");
      if (hamburger.classList.contains("hidden")) {
        hamburger.classList.remove("hidden");
      } else {
        hamburger.classList.add("hidden");
      }
    };

    const checkboxOne = (e) => {
      if (e.target.checked) {
        document.querySelector(".checkboxOne").classList.add("bg-blue-400");
        document.querySelector(".checkboxTwo").classList.add("bg-blue-400");
        document.querySelector(".checkboxThree").classList.add("bg-blue-400");
        document.querySelector(".checkboxTwo").disabled = true;
        document.querySelector(".checkboxThree").disabled = true;
      } else {
        document.querySelector(".checkboxOne").classList.remove("bg-blue-400");
        document.querySelector(".checkboxTwo").classList.remove("bg-blue-400");
        document
          .querySelector(".checkboxThree")
          .classList.remove("bg-blue-400");
        document.querySelector(".checkboxTwo").disabled = false;
        document.querySelector(".checkboxThree").disabled = false;
      }
    };

    const checkboxTwo = (e) => {
      if (e.target.checked) {
        document.querySelector(".checkboxTwo").classList.add("bg-blue-400");
        document.querySelector(".checkboxOne").disabled = true;
      } else {
        document.querySelector(".checkboxTwo").classList.remove("bg-blue-400");
        document.querySelector(".checkboxOne").disabled = false;
      }
    };

    const checkboxThree = (e) => {
      if (e.target.checked) {
        document.querySelector(".checkboxThree").classList.add("bg-blue-400");

        document.querySelector(".checkboxOne").disabled = true;
      } else {
        document
          .querySelector(".checkboxThree")
          .classList.remove("bg-blue-400");

        document.querySelector(".checkboxOne").disabled = false;
      }
    };
  </script>
</html>
